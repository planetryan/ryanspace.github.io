"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["237"],{24617:function(e,t,o){o.r(t),o.d(t,{Checkout:()=>Z});var i=o(88635),n=o(43812),r=o(43064),a=o(77718),l=o(69144),c=o(34229),s=o(99140),d=o(73003),u=o(24676),m=o(81201),p=o(50043);let h=e=>e[0].toUpperCase()+e.slice(1),y=e=>{var t;let{checkout:o,isMotionSafe:l}=e,c=(0,u.useRouter)(),{setIsOpen:s}=(0,a.useDrawerContext)(),{newSubscriptionRedirectUrl:m}=(0,n.useCheckoutContext)();return(0,i.BX)(i.HY,{children:[(0,i.tZ)(a.Drawer.Body,{children:(0,i.BX)(r.Span,{elementDescriptor:r.descriptors.checkoutSuccessRoot,sx:e=>({margin:"auto",position:"relative",aspectRatio:"1/1",display:"grid",width:"100%",padding:e.space.$4,flexShrink:0,transformOrigin:"bottom center",animationName:"scaleIn",animationDuration:"".concat(d.bf.slowest,"ms"),animationTimingFunction:d.$$.bezier,animationFillMode:"forwards",opacity:0,"@keyframes scaleIn":{"0%":{filter:"blur(10px)",transform:"scale(0.85)",opacity:0},"100%":{filter:"blur(0px)",transform:"scale(1)",opacity:1}},...!l&&{animation:"none",opacity:1}}),children:[[1,.75,.5].map((e,t,o)=>(0,i.tZ)(f,{scale:e,index:o.length-1-t,isMotionSafe:l},e)),(0,i.BX)(r.Box,{elementDescriptor:r.descriptors.checkoutSuccessBadge,sx:e=>({margin:"auto",gridArea:"1/1",display:"flex",position:"relative",width:e.sizes.$16,height:e.sizes.$16,borderRadius:e.radii.$circle,backgroundImage:"linear-gradient(180deg, rgba(255, 255, 255, 0.30) 0%, rgba(0, 0, 0, 0.12) 50%, rgba(0, 0, 0, 0.30) 95.31%)",boxShadow:"0px 4px 12px 0px rgba(0, 0, 0, 0.35), 0px 1px 0px 0px rgba(255, 255, 255, 0.05) inset",":before":{content:'""',position:"absolute",inset:e.space.$1,borderRadius:e.radii.$circle,backgroundColor:e.colors.$colorBackground}}),children:[(0,i.tZ)("svg",{fill:"none",viewBox:"0 0 10 10","aria-hidden":"true",style:{position:"relative",margin:"auto",width:"1rem",height:"1rem"},children:(0,i.tZ)("path",{d:"m1 6 3 3 5-8",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"1",pathLength:"1",style:{strokeDashoffset:"1",animationName:"check",animationDuration:"".concat(d.bf.drawer,"ms"),animationTimingFunction:d.$$.bezier,animationFillMode:"forwards",animationDelay:"".concat(d.bf.slow,"ms"),...!l&&{strokeDashoffset:"0",animation:"none"}}})}),(0,i.tZ)("style",{children:"\n              @keyframes check {\n                0% {\n                  stroke-dashoffset: 1;\n                }\n                100% {\n                  stroke-dashoffset: 0;\n                }\n            "})]}),(0,i.BX)(r.Span,{sx:e=>({margin:"auto",gridArea:"1/1",position:"relative",textAlign:"center",transform:"translateY(".concat(e.space.$20,")")}),children:[(0,i.tZ)(r.Heading,{elementDescriptor:r.descriptors.checkoutSuccessTitle,as:"h2",textVariant:"h2",localizationKey:o.totals.totalDueNow.amount>0?(0,r.localizationKeys)("commerce.checkout.title__paymentSuccessful"):(0,r.localizationKeys)("commerce.checkout.title__subscriptionSuccessful"),sx:{opacity:0,animationName:"slideUp",animationDuration:"".concat(d.bf.slowest,"ms"),animationTimingFunction:d.$$.bezier,animationFillMode:"forwards","@keyframes slideUp":{"0%":{transform:"translateY(30px)",opacity:0},"100%":{transform:"translateY(0)",opacity:1}},...!l&&{opacity:1,animation:"none"}}}),(0,i.tZ)(r.Text,{elementDescriptor:r.descriptors.checkoutSuccessDescription,colorScheme:"secondary",sx:e=>({textAlign:"center",paddingInline:e.space.$8,marginBlockStart:e.space.$2,opacity:0,animationName:"slideUp",animationDuration:"".concat(1.5*d.bf.slowest,"ms"),animationTimingFunction:d.$$.bezier,animationFillMode:"forwards","@keyframes slideUp":{"0%":{transform:"translateY(30px)",opacity:0},"100%":{transform:"translateY(0)",opacity:1}},...!l&&{opacity:1,animation:"none"}}),localizationKey:o.totals.totalDueNow.amount>0?(0,r.localizationKeys)("commerce.checkout.description__paymentSuccessful"):(0,r.localizationKeys)("commerce.checkout.description__subscriptionSuccessful")})]})]})}),(0,i.BX)(a.Drawer.Footer,{sx:e=>({rowGap:e.space.$4,animationName:"footerSlideInUp",animationDuration:"".concat(d.bf.drawer,"ms"),animationTimingFunction:d.$$.bezier,"@keyframes footerSlideInUp":{"0%":{transform:"translateY(100%)",opacity:0},"100%":{transform:"translateY(0)",opacity:1}},...!l&&{animation:"none"}}),children:[(0,i.BX)(a.LineItems.Root,{children:[(0,i.BX)(a.LineItems.Group,{variant:"secondary",children:[(0,i.tZ)(a.LineItems.Title,{title:(0,r.localizationKeys)("commerce.checkout.lineItems.title__totalPaid")}),(0,i.tZ)(a.LineItems.Description,{text:"".concat(o.totals.totalDueNow.currencySymbol).concat(o.totals.totalDueNow.amountFormatted)})]}),(0,i.BX)(a.LineItems.Group,{variant:"secondary",children:[(0,i.tZ)(a.LineItems.Title,{title:o.totals.totalDueNow.amount>0?(0,r.localizationKeys)("commerce.checkout.lineItems.title__paymentMethod"):(0,r.localizationKeys)("commerce.checkout.lineItems.title__subscriptionBegins")}),(0,i.tZ)(a.LineItems.Description,{text:o.totals.totalDueNow.amount>0?o.paymentSource?"card"!==o.paymentSource.paymentMethod?"".concat(h(o.paymentSource.paymentMethod)):"".concat(h(o.paymentSource.cardType)," ⋯ ").concat(o.paymentSource.last4):"–":(null===(t=o.subscription)||void 0===t?void 0:t.periodStart)?(0,p.p6)(new Date(o.subscription.periodStart)):"–"})]})]}),(0,i.tZ)(r.Button,{onClick:()=>{m&&c.navigate(m),s&&s(!1)},localizationKey:(0,r.localizationKeys)("formButtonPrimary")})]})]})};function f(e){let{scale:t,index:o,isMotionSafe:n}=e;return(0,i.tZ)(r.Span,{elementDescriptor:r.descriptors.checkoutSuccessRing,sx:e=>({margin:"auto",gridArea:"1/1",width:"".concat(100*t,"%"),height:"".concat(100*t,"%"),borderWidth:1,borderStyle:"solid",borderColor:e.colors.$neutralAlpha200,borderRadius:e.radii.$circle,maskImage:"linear-gradient(to bottom, transparent 15%, black, transparent 85%)",opacity:0,animationName:m.animations.fadeIn,animationDuration:"".concat(d.bf.slow,"ms"),animationTimingFunction:d.$$.bezier,animationFillMode:"forwards",animationDelay:"".concat(o*d.bf.slow,"ms"),...!n&&{animation:"none",opacity:1}})})}o(65223);var g=o(83799),b=o(63610),v=o(6771);let S=e=>e[0].toUpperCase()+e.slice(1),k=e=>{var t,o,n;let{checkout:l,onCheckoutComplete:c}=e,{plan:s,planPeriod:d,totals:u,isImmediatePlanChange:m}=l,p=!!(null===(t=u.credit)||void 0===t?void 0:t.amount)&&u.credit.amount>0;return(0,i.BX)(a.Drawer.Body,{children:[(0,i.tZ)(r.Box,{elementDescriptor:r.descriptors.checkoutFormLineItemsRoot,sx:e=>({padding:e.space.$4,borderBottomWidth:e.borderWidths.$normal,borderBottomStyle:e.borderStyles.$solid,borderBottomColor:e.colors.$neutralAlpha100}),children:(0,i.BX)(a.LineItems.Root,{children:[(0,i.BX)(a.LineItems.Group,{children:[(0,i.tZ)(a.LineItems.Title,{title:s.name,description:"annual"===d?(0,r.localizationKeys)("commerce.billedAnnually"):void 0}),(0,i.tZ)(a.LineItems.Description,{prefix:"annual"===d?"x12":void 0,text:"".concat(s.currencySymbol).concat("month"===d?s.amountFormatted:s.annualMonthlyAmountFormatted),suffix:(0,r.localizationKeys)("commerce.checkout.perMonth")})]}),(0,i.BX)(a.LineItems.Group,{borderTop:!0,variant:"tertiary",children:[(0,i.tZ)(a.LineItems.Title,{title:"Subtotal"}),(0,i.tZ)(a.LineItems.Description,{text:"".concat(u.subtotal.currencySymbol).concat(u.subtotal.amountFormatted)})]}),p&&(0,i.BX)(a.LineItems.Group,{variant:"tertiary",children:[(0,i.tZ)(a.LineItems.Title,{title:"Credit for the remainder of your current subscription."}),(0,i.tZ)(a.LineItems.Description,{text:"- ".concat(null===(o=u.credit)||void 0===o?void 0:o.currencySymbol).concat(null===(n=u.credit)||void 0===n?void 0:n.amountFormatted)})]}),(0,i.BX)(a.LineItems.Group,{borderTop:!0,children:[(0,i.tZ)(a.LineItems.Title,{title:"Total Due Today"}),(0,i.tZ)(a.LineItems.Description,{text:"".concat(u.totalDueNow.currencySymbol).concat(u.totalDueNow.amountFormatted)})]})]})}),!m&&(0,i.tZ)(r.Box,{elementDescriptor:r.descriptors.checkoutFormLineItemsRoot,sx:e=>({paddingBlockStart:e.space.$4,paddingInline:e.space.$4}),children:(0,i.tZ)(r.Text,{localizationKey:(0,r.localizationKeys)("commerce.checkout.downgradeNotice"),variant:"caption",colorScheme:"secondary"})}),(0,i.tZ)(x,{checkout:l,onCheckoutComplete:c})]})},x=e=>{let{checkout:t,onCheckoutComplete:o}=e,{organization:s}=(0,g.o8)(),{subscriber:d,subscriberType:u}=(0,n.useCheckoutContext)(),[m,h]=(0,l.useState)("existing"),[y,f]=(0,l.useState)(!1),[b,S]=(0,l.useState)(),{data:k,revalidate:x}=(0,c.ib)(d().getPaymentSources,{},void 0,"commerce-payment-sources-".concat(d().id)),{data:w}=k||{data:[]};(0,l.useEffect)(()=>{h(w.length>0?"existing":"new")},[w]);let Z=async e=>{try{let i=await t.confirm({...e,..."org"===u?{orgId:null==s?void 0:s.id}:{}});o(i)}catch(e){(0,p.S3)(e,[],S)}},C=async e=>{e.preventDefault(),f(!0),S(void 0);let t=new FormData(e.currentTarget).get("payment_source_id");await Z({paymentSourceId:t,..."org"===u?{orgId:null==s?void 0:s.id}:{}}),f(!1)},D=async e=>{var t;x(),await Z({gateway:"stripe",paymentToken:null===(t=e.stripeSetupIntent)||void 0===t?void 0:t.payment_method,..."org"===u?{orgId:null==s?void 0:s.id}:{}}),f(!1)},P=async()=>{try{let e=await t.confirm({gateway:"stripe",useTestCard:!0,..."org"===u?{orgId:null==s?void 0:s.id}:{}});o(e),x()}catch(e){(0,p.S3)(e,[],S)}};return(0,i.BX)(r.Col,{elementDescriptor:r.descriptors.checkoutFormElementsRoot,gap:4,sx:e=>({padding:e.space.$4}),children:[w.length>0&&t.totals.totalDueNow.amount>0&&(0,i.BX)(a.SegmentedControl.Root,{"aria-label":"Payment method source",value:m,onChange:e=>h(e),size:"lg",fullWidth:!0,children:[(0,i.tZ)(a.SegmentedControl.Button,{value:"existing",text:"Payment Methods"}),(0,i.tZ)(a.SegmentedControl.Button,{value:"new",text:"Add payment method"})]}),"existing"===m&&(0,i.tZ)(B,{checkout:t,paymentSources:w,totalDueNow:t.totals.totalDueNow,onPaymentSourceSubmit:C,isSubmitting:y,submitError:b}),"new"===m&&(0,i.tZ)(v.M$,{checkout:t,onSuccess:D,onPayWithTestPaymentSourceSuccess:P,submitLabel:t.totals.totalDueNow.amount>0?(0,r.localizationKeys)("userProfile.billingPage.paymentSourcesSection.formButtonPrimary__pay",{amount:"".concat(t.totals.totalDueNow.currencySymbol).concat(t.totals.totalDueNow.amountFormatted)}):"Subscribe",submitError:b,setSubmitError:S,showPayWithTestCardSection:!0})]})},B=e=>{let{checkout:t,totalDueNow:o,paymentSources:n,onPaymentSourceSubmit:c,isSubmitting:s,submitError:d}=e,[u,p]=(0,l.useState)(t.paymentSource||n.find(e=>e.isDefault)),h=(0,l.useMemo)(()=>n.map(e=>{let t="card"!==e.paymentMethod?"".concat(S(e.paymentMethod)):"".concat(S(e.cardType)," ⋯ ").concat(e.last4);return{value:e.id,label:t}}),[n]);return(0,i.BX)(r.Form,{onSubmit:c,sx:e=>({display:"flex",flexDirection:"column",rowGap:e.space.$4}),children:[t.totals.totalDueNow.amount>0?(0,i.BX)(a.Select,{elementId:"paymentSource",options:h,value:(null==u?void 0:u.id)||null,onChange:e=>{p(n.find(t=>t.id===e.value))},portal:!0,children:[(0,i.tZ)("input",{name:"payment_source_id",type:"hidden",value:null==u?void 0:u.id}),(0,i.tZ)(a.SelectButton,{icon:b.jC,sx:e=>({justifyContent:"space-between",backgroundColor:e.colors.$colorBackground}),children:u&&(0,i.tZ)(v.jr,{paymentSource:u})}),(0,i.tZ)(a.SelectOptionList,{sx:e=>({paddingBlock:e.space.$1,color:e.colors.$colorText})})]}):(0,i.tZ)("input",{name:"payment_source_id",type:"hidden",value:null==u?void 0:u.id}),d&&(0,i.tZ)(a.Alert,{variant:"danger",sx:e=>({animation:"".concat(m.animations.textInBig," ").concat(e.transitionDuration.$slow)}),children:"string"==typeof d?d:"longMessage"in d&&d.longMessage||d.message}),(0,i.tZ)(r.Button,{type:"submit",colorScheme:"primary",size:"sm",textVariant:"buttonLarge",sx:{width:"100%"},isLoading:s,children:o.amount>0?(0,i.BX)(i.HY,{children:["Pay ",o.currencySymbol,o.amountFormatted]}):"Subscribe"})]})},w=e=>{let{translateError:t}=(0,r.useLocalizations)(),{planId:o,planPeriod:d,subscriberType:u,onSubscriptionComplete:m}=e,{setIsOpen:p,isOpen:h}=(0,a.useDrawerContext)(),f=(0,c.Tb)(),{animations:g}=(0,r.useAppearance)().parsedLayout,{data:b,isLoading:v}=(0,n.usePlans)(),{checkout:S,isLoading:x,invalidate:B,revalidate:w,updateCheckout:Z,errors:C}=(0,c.Mg)({planId:o,planPeriod:d,subscriberType:u}),D=!!(null==C?void 0:C.some(e=>"missing_payer_email"===e.code)),P=null==b?void 0:b.find(e=>e.id===o);if((0,l.useEffect)(()=>{h&&w()},[h]),x||v)return(0,i.tZ)(r.Spinner,{sx:{margin:"auto"}});if(S)return(null==S?void 0:S.status)==="completed"?(0,i.tZ)(y,{checkout:S,isMotionSafe:!f&&!0===g}):(0,i.tZ)(k,{checkout:S,onCheckoutComplete:e=>{B(),Z(e),null==m||m()}});if(D)return(0,i.tZ)(a.Drawer.Body,{children:(0,i.tZ)(r.Box,{sx:e=>({padding:e.space.$4}),children:(0,i.tZ)(s._,{title:(0,r.localizationKeys)("commerce.checkout.emailForm.title"),subtitle:(0,r.localizationKeys)("commerce.checkout.emailForm.subtitle"),onSuccess:w,onReset:()=>p(!1),disableAutoFocus:!0})})});let _=null==C?void 0:C[0];return(null==_?void 0:_.code)==="invalid_plan_change"&&P?(0,i.tZ)(a.Drawer.Body,{children:(0,i.BX)(r.Flex,{gap:4,direction:"col",children:[(0,i.tZ)(r.Box,{elementDescriptor:r.descriptors.checkoutFormLineItemsRoot,sx:e=>({padding:e.space.$4,borderBottomWidth:e.borderWidths.$normal,borderBottomStyle:e.borderStyles.$solid,borderBottomColor:e.colors.$neutralAlpha100}),children:(0,i.tZ)(a.LineItems.Root,{children:(0,i.BX)(a.LineItems.Group,{children:[(0,i.tZ)(a.LineItems.Title,{title:P.name,description:"annual"===d?(0,r.localizationKeys)("commerce.billedAnnually"):void 0}),(0,i.tZ)(a.LineItems.Description,{prefix:"annual"===d?"x12":void 0,text:"".concat(P.currencySymbol).concat("month"===d?P.amountFormatted:P.annualMonthlyAmountFormatted),suffix:(0,r.localizationKeys)("commerce.checkout.perMonth")})]})})}),(0,i.tZ)(r.Box,{sx:e=>({padding:e.space.$4}),children:(0,i.tZ)(a.Alert,{variant:"info",colorScheme:"info",title:"You cannot subscribe to this plan by paying monthly. To subscribe to this plan, you need to choose to pay annually."})})]})}):(0,i.tZ)(a.Drawer.Body,{children:(0,i.tZ)(r.Flex,{align:"center",justify:"center",sx:e=>({height:"100%",padding:e.space.$4,fontSize:e.fontSizes.$md}),children:(0,i.tZ)(a.Alert,{variant:"danger",colorScheme:"danger",children:C?t(C[0]):"There was a problem, please try again later."})})})},Z=e=>(0,i.tZ)(r.Flow.Root,{flow:"checkout",children:(0,i.tZ)(r.Flow.Part,{children:(0,i.tZ)(n.SubscriberTypeContext.Provider,{value:e.subscriberType||"user",children:(0,i.tZ)(n.CheckoutContext.Provider,{value:{componentName:"Checkout",...e},children:(0,i.BX)(a.Drawer.Content,{children:[(0,i.tZ)(a.Drawer.Header,{title:"Checkout"}),(0,i.tZ)(w,{...e})]})})})})})},99140:function(e,t,o){o.d(t,{_:()=>b}),o(92037),o(28419);var i=o(88635),n=o(83799),r=o(69144),a=o(8969),l=o(43812),c=o(77718),s=o(91085),d=o(50043),u=o(10207);o(50725);var m=o(24676),p=o(26917),h=o(43064),y=o(34229);let f=e=>{let{navigate:t}=(0,m.useRouter)(),{email:o,nextStep:n,onReset:a}=e,s=(0,c.useCardState)(),u=(0,l.useUserProfileContext)(),{startEnterpriseSSOLinkFlow:f}=(0,y.eq)(o);async function g(){var e;await t((null===(e=o.verification.externalVerificationRedirectURL)||void 0===e?void 0:e.href)||"")}return r.useEffect(()=>{!function(){let{mode:e,componentName:t}=u;f({redirectUrl:"modal"===e?(0,p.bX)({url:window.location.href,componentName:t}):window.location.href}).then(()=>n()).catch(e=>(0,d.S3)(e,[],s.setError))}()},[]),(0,i.BX)(i.HY,{children:[(0,i.tZ)(h.Flex,{justify:"center",children:(0,i.tZ)(h.Button,{variant:"link",onClick:g,localizationKey:(0,h.localizationKeys)("userProfile.emailAddressPage.enterpriseSSOLink.formButton")})}),(0,i.tZ)(c.FormButtonContainer,{children:(0,i.tZ)(h.Button,{variant:"ghost",localizationKey:(0,h.localizationKeys)("userProfile.formButtonReset"),elementDescriptor:h.descriptors.formButtonReset,onClick:a})})]})};var g=o(12786);let b=(0,c.withCardStateProvider)(e=>{var t,o;let{emailId:m,onSuccess:p,onReset:h,disableAutoFocus:y=!1}=e,b=(0,c.useCardState)(),{user:k}=(0,n.aF)(),x=(0,l.useEnvironment)(),B=(0,n.WZ)(e=>null==k?void 0:k.createEmailAddress({email:e})),w=r.useRef(null==k?void 0:k.emailAddresses.find(e=>e.id===m)),Z=S(w.current,x),C=(0,a.a2)({defaultStep:+!!w.current,onNextStep:()=>b.setError(void 0)}),D=(0,d.Yp)("emailAddress","",{type:"email",label:(0,s.u1)("formFieldLabel__emailAddress"),placeholder:(0,s.u1)("formFieldInputPlaceholder__emailAddress"),isRequired:!0}),P=D.value.length>1&&(null==k?void 0:k.username)!==D.value,_=async e=>{if(e.preventDefault(),k)return B(D.value).then(e=>{w.current=e,C.nextStep()}).catch(e=>(0,d.S3)(e,[D],b.setError))},F=v(Z);return(0,i.BX)(a.en,{...C.props,children:[(0,i.tZ)(c.FormContainer,{headerTitle:e.title||(0,s.u1)("userProfile.emailAddressPage.title"),headerSubtitle:e.subtitle||(0,s.u1)("userProfile.emailAddressPage.formHint"),children:(0,i.BX)(c.Form.Root,{onSubmit:_,children:[(0,i.tZ)(c.Form.ControlRow,{elementId:D.id,children:(0,i.tZ)(c.Form.PlainInput,{...D.props,autoFocus:!y})}),(0,i.tZ)(c.FormButtons,{submitLabel:(0,s.u1)("userProfile.formButtonPrimary__add"),isDisabled:!P,onReset:h})]})}),(0,i.BX)(c.FormContainer,{headerTitle:(0,s.u1)("userProfile.emailAddressPage.verifyTitle"),headerSubtitle:(0,s.u1)("".concat(F,".formSubtitle"),{identifier:null===(t=w.current)||void 0===t?void 0:t.emailAddress}),children:["email_link"===Z&&(0,i.tZ)(g.K,{nextStep:p,email:w.current,onReset:h}),"email_code"===Z&&(0,i.tZ)(u.H,{nextStep:p,identification:w.current,identifier:null===(o=w.current)||void 0===o?void 0:o.emailAddress,prepareVerification:()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.prepareVerification({strategy:"email_code"})},onReset:h}),"enterprise_sso"===Z&&(0,i.tZ)(f,{nextStep:p,email:w.current,onReset:h})]})]})}),v=e=>{switch(e){case"email_code":return"userProfile.emailAddressPage.emailCode";case"enterprise_sso":return"userProfile.emailAddressPage.enterpriseSSOLink";case"email_link":return"userProfile.emailAddressPage.emailLink";default:throw Error("Unsupported strategy for email verification: ".concat(e))}},S=(e,t)=>(null==e?void 0:e.matchesSsoConnection)?"enterprise_sso":!function(e){let{userSettings:t}=e,{email_address:o}=t.attributes;return!!((null==o?void 0:o.enabled)&&(null==o?void 0:o.verifications.includes("email_link")))}(t)?"email_code":"email_link"},10207:function(e,t,o){o.d(t,{H:()=>c});var i=o(88635),n=o(69144),r=o(43064),a=o(77718),l=o(50043);let c=e=>{let t=(0,a.useCardState)(),{nextStep:o,identification:c,identifier:s,onReset:d,prepareVerification:u}=e,m=()=>{var e;return null==u?void 0:null===(e=u())||void 0===e?void 0:e.catch(e=>(0,l.S3)(e,[],t.setError))},p=(0,a.useFieldOTP)({onCodeEntryFinished:(e,t,o)=>{null==c||c.attemptVerification({code:e}).then(()=>t()).catch(o)},onResendCodeClicked:m,onResolve:o});return n.useEffect(()=>{m()},[]),(0,i.BX)(i.HY,{children:[(0,i.tZ)(a.Form.OTPInput,{...p,label:(0,r.localizationKeys)("userProfile.emailAddressPage.emailCode.formTitle"),description:(0,r.localizationKeys)("userProfile.emailAddressPage.emailCode.formSubtitle",{identifier:s}),resendButton:(0,r.localizationKeys)("userProfile.emailAddressPage.emailCode.resendButton"),centerAlign:!1}),(0,i.BX)(a.FormButtonContainer,{children:[(0,i.tZ)(r.Button,{isLoading:p.isLoading,localizationKey:(0,r.localizationKeys)("formButtonPrimary__verify"),elementDescriptor:r.descriptors.formButtonPrimary,onClick:p.onFakeContinue}),(0,i.tZ)(r.Button,{variant:"ghost",isDisabled:p.isLoading,localizationKey:(0,r.localizationKeys)("userProfile.formButtonReset"),elementDescriptor:r.descriptors.formButtonReset,onClick:d})]})]})}},12786:function(e,t,o){o.d(t,{K:()=>m,M:()=>p});var i=o(88635),n=o(69144),r=o(8969),a=o(56749),l=o(43812),c=o(43064),s=o(77718),d=o(34229),u=o(50043);let m=e=>{let{email:t,nextStep:o,onReset:r}=e,m=(0,s.useCardState)(),p=(0,l.useUserProfileContext)(),{startEmailLinkFlow:h}=(0,d.E2)(t),{displayConfig:y}=(0,l.useEnvironment)();function f(){let{routing:e}=p,t="virtual"===e?y.userProfileUrl:"";h({redirectUrl:(0,a.Uu)({ctx:p,baseUrl:t,intent:"profile"})}).then(()=>o()).catch(e=>(0,u.S3)(e,[],m.setError))}return n.useEffect(()=>{f()},[]),(0,i.BX)(i.HY,{children:[(0,i.tZ)(s.VerificationLink,{resendButton:(0,c.localizationKeys)("userProfile.emailAddressPage.emailLink.resendButton"),onResendCodeClicked:f}),(0,i.tZ)(s.FormButtonContainer,{children:(0,i.tZ)(c.Button,{variant:"ghost",localizationKey:(0,c.localizationKeys)("userProfile.formButtonReset"),elementDescriptor:c.descriptors.formButtonReset,onClick:r})})]})},p=()=>(0,i.tZ)(r.Ej,{title:(0,c.localizationKeys)("signUp.emailLink.verifiedSwitchTab.title"),subtitle:(0,c.localizationKeys)("signUp.emailLink.verifiedSwitchTab.subtitle"),status:"verified"})}}]);