"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["916"],{14961:function(e,i,t){t.r(i),t.d(i,{OrganizationBillingPage:()=>m});var a=t(88635),n=t(8969),l=t(43812),o=t(43064),r=t(77718),s=t(93746),c=t(63610),d=t(24676),h=t(6771),g=t(15515),p=t(91800);let u={0:"plans",1:"statements",2:"payment-methods"},b=(0,r.withCardStateProvider)(()=>{let e=(0,r.useCardState)(),{data:i}=(0,l.useSubscriptions)("org"),{selectedTab:t,handleTabChange:b}=(0,s.x)(u),{navigate:m}=(0,d.useRouter)();return Array.isArray(null==i?void 0:i.data)?(0,a.tZ)(o.Col,{elementDescriptor:o.descriptors.page,sx:e=>({gap:e.space.$8,color:e.colors.$colorText}),children:(0,a.BX)(o.Col,{elementDescriptor:o.descriptors.profilePage,elementId:o.descriptors.profilePage.setId("billing"),gap:4,children:[(0,a.tZ)(r.Header.Root,{children:(0,a.tZ)(r.Header.Title,{localizationKey:(0,o.localizationKeys)("organizationProfile.billingPage.title"),textVariant:"h2"})}),(0,a.tZ)(r.Card.Alert,{children:e.error}),(0,a.BX)(r.Tabs,{value:t,onChange:b,children:[(0,a.BX)(r.TabsList,{sx:e=>({gap:e.space.$6}),children:[(0,a.tZ)(r.Tab,{localizationKey:(0,o.localizationKeys)("organizationProfile.billingPage.start.headerTitle__subscriptions")}),(0,a.tZ)(r.Tab,{localizationKey:(0,o.localizationKeys)("organizationProfile.billingPage.start.headerTitle__statements")})]}),(0,a.BX)(r.TabPanels,{children:[(0,a.tZ)(r.TabPanel,{sx:{width:"100%",flexDirection:"column"},children:(0,a.BX)(o.Flex,{sx:{width:"100%",flexDirection:"column"},gap:4,children:[(0,a.BX)(r.ProfileSection.Root,{id:"subscriptionsList",title:(0,o.localizationKeys)("organizationProfile.billingPage.subscriptionsListSection.title"),centered:!1,sx:e=>({borderTop:"none",paddingTop:e.space.$1}),children:[(0,a.tZ)(n.Cv,{condition:e=>!e({permission:"org:sys_billing:manage"}),children:(0,a.tZ)(r.Alert,{variant:"info",colorScheme:"info",title:(0,o.localizationKeys)("organizationProfile.billingPage.alerts.noPermissionsToManageBilling")})}),(0,a.tZ)(p.b,{}),(0,a.tZ)(r.ProfileSection.ArrowButton,{id:"subscriptionsList",textLocalizationKey:(0,o.localizationKeys)("organizationProfile.billingPage.subscriptionsListSection.actionLabel__switchPlan"),sx:[e=>({justifyContent:"start",height:e.sizes.$8})],leftIcon:c.Ic,leftIconSx:e=>({width:e.sizes.$4,height:e.sizes.$4}),onClick:()=>void m("plans")})]}),(0,a.tZ)(n.Cv,{condition:e=>e({permission:"org:sys_billing:manage"}),children:(0,a.tZ)(h.Hw,{})})]})}),(0,a.tZ)(r.TabPanel,{sx:{width:"100%"},children:(0,a.tZ)(l.StatementsContextProvider,{children:(0,a.tZ)(g.f,{})})})]})]})]})}):null}),m=()=>(0,a.tZ)(l.SubscriberTypeContext.Provider,{value:"org",children:(0,a.tZ)(l.PlansContextProvider,{children:(0,a.tZ)(b,{})})})},91800:function(e,i,t){t.d(i,{b:()=>s});var a=t(88635),n=t(8969),l=t(43812),o=t(43064),r=t(63610);function s(){let{subscriptions:e,handleSelectPlan:i,captionForSubscription:t,canManageSubscription:s}=(0,l.usePlansContext)(),c=(0,l.useSubscriberTypeContext)(),d=(0,n.N2)(e=>e({permission:"org:sys_billing:manage"})||"user"===c),h=(e,t)=>{i({mode:"modal",plan:e.plan,planPeriod:e.planPeriod,event:t})},g=e.sort((e,i)=>"active"===e.status&&"active"!==i.status?-1:("active"===i.status&&e.status,1));return(0,a.BX)(o.Table,{tableHeadVisuallyHidden:!0,children:[(0,a.tZ)(o.Thead,{children:(0,a.BX)(o.Tr,{children:[(0,a.tZ)(o.Th,{children:"Plan"}),(0,a.tZ)(o.Th,{children:"Start date"}),(0,a.tZ)(o.Th,{children:"Edit"})]})}),(0,a.tZ)(o.Tbody,{children:g.map(e=>(0,a.BX)(o.Tr,{children:[(0,a.tZ)(o.Td,{children:(0,a.BX)(o.Col,{gap:1,children:[(0,a.BX)(o.Flex,{align:"center",gap:1,children:[(0,a.tZ)(o.Icon,{icon:r.ou,sx:e=>({width:e.sizes.$4,height:e.sizes.$4,opacity:e.opacity.$inactive})}),(0,a.tZ)(o.Text,{variant:"subtitle",sx:e=>({marginRight:e.sizes.$1}),children:e.plan.name}),g.length>1||e.canceledAt?(0,a.tZ)(o.Badge,{colorScheme:"active"===e.status?"secondary":"primary",localizationKey:"active"===e.status?(0,o.localizationKeys)("badge__activePlan"):(0,o.localizationKeys)("badge__upcomingPlan")}):null]}),(!e.plan.isDefault||"upcoming"===e.status)&&(0,a.tZ)(o.Text,{variant:"caption",colorScheme:"secondary",localizationKey:t(e)})]})}),(0,a.tZ)(o.Td,{sx:e=>({textAlign:"right"}),children:(0,a.BX)(o.Text,{variant:"subtitle",children:[e.plan.currencySymbol,"annual"===e.planPeriod?e.plan.annualAmountFormatted:e.plan.amountFormatted,(e.plan.amount>0||e.plan.annualAmount>0)&&(0,a.tZ)(o.Span,{sx:e=>({color:e.colors.$colorTextSecondary,textTransform:"lowercase",":before":{content:'"/"',marginInline:e.space.$1}}),localizationKey:"annual"===e.planPeriod?(0,o.localizationKeys)("commerce.year"):(0,o.localizationKeys)("commerce.month")})]})}),(0,a.tZ)(o.Td,{sx:e=>({textAlign:"right"}),children:s({subscription:e})&&e.id&&!e.plan.isDefault&&(0,a.tZ)(o.Button,{"aria-label":"Manage subscription",onClick:i=>h(e,i),variant:"bordered",colorScheme:"secondary",isDisabled:!d,sx:e=>({width:e.sizes.$6,height:e.sizes.$6}),children:(0,a.tZ)(o.Icon,{icon:r.tc,sx:e=>({width:e.sizes.$4,height:e.sizes.$4,opacity:e.opacity.$inactive})})})})]},e.id))})]})}}}]);